import threading
from typing import Collection
from bs4 import BeautifulSoup as bs
import timerAa

import requests

class multi_thread():
    def nolock_task(self,url) -> Collection:
        session = requests.session()
        req = session.get(url)
        encoding = req.encoding
        #print(encoding)
        title = str(bs(req.text.encode().decode(encoding),'html.parser').title)
        #print(title)
        with open("./multi_thread.txt","a",encoding="UTF-8") as f:
            f.write((title+"\n"))
        return title


if __name__ == "__main__":
    url = ['https://www.bilibili.com', 'https://www.bilibili.com/anime/', 'https://game.bilibili.com/platform/', 'https://live.bilibili.com', 'https://show.bilibili.com/platform/home.html?msource=pc_web', 'https://manga.bilibili.com?from=bill_top_mnav', 'https://www.bilibili.com/v/game/match/', 'https://app.bilibili.com', 'https://search.bilibili.com/?from_source=webtop_search', 'https://www.bilibili.com', 'https://t.bilibili.com', 'https://www.bilibili.com/v/popular/all', 'https://www.bilibili.com/v/channel', 'https://www.bilibili.com/v/douga/mad/', 'https://www.bilibili.com/v/douga/mmd/', 'https://www.bilibili.com/v/douga/voice/', 'https://www.bilibili.com/v/douga/garage_kit/', 'https://www.bilibili.com/v/douga/tokusatsu/', 'https://www.bilibili.com/v/douga/other/', 'https://www.bilibili.com/v/douga/', 'https://www.bilibili.com/v/anime/serial/', 'https://www.bilibili.com/v/anime/finish/', 'https://www.bilibili.com/v/anime/information/', 'https://www.bilibili.com/v/anime/offical/', 'https://www.bilibili.com/anime/timeline/', 'https://www.bilibili.com/anime/index/', 'https://www.bilibili.com/anime/', 'https://www.bilibili.com/v/music/original/', 'https://www.bilibili.com/v/music/cover/', 'https://www.bilibili.com/v/music/vocaloid/', 'https://www.bilibili.com/v/music/electronic/', 'https://www.bilibili.com/v/music/perform/', 'https://www.bilibili.com/v/music/mv/', 'https://www.bilibili.com/v/music/live/', 'https://www.bilibili.com/v/music/other/', 'https://www.bilibili.com/audio/home?musicType=music', 'https://www.bilibili.com/v/rap', 'https://www.bilibili.com/v/music/', 'https://www.bilibili.com/v/guochuang/chinese/', 'https://www.bilibili.com/v/guochuang/original/', 'https://www.bilibili.com/v/guochuang/puppetry/', 'https://www.bilibili.com/v/guochuang/motioncomic/', 'https://www.bilibili.com/v/guochuang/information/', 'https://www.bilibili.com/guochuang/timeline/', 'https://www.bilibili.com/guochuang/index/', 'https://www.bilibili.com/guochuang/', 'https://www.bilibili.com/v/dance/otaku/', 'https://www.bilibili.com/v/dance/hiphop/', 'https://www.bilibili.com/v/dance/star/', 'https://www.bilibili.com/v/dance/china/', 'https://www.bilibili.com/v/dance/three_d/', 'https://www.bilibili.com/v/dance/demo/', 'https://www.bilibili.com/v/dance/', 'https://www.bilibili.com/v/game/stand_alone/', 'https://www.bilibili.com/v/game/esports/', 'https://www.bilibili.com/v/game/mobile/', 'https://www.bilibili.com/v/game/online/', 'https://www.bilibili.com/v/game/board/', 'https://www.bilibili.com/v/game/gmv/', 'https://www.bilibili.com/v/game/music/', 'https://www.bilibili.com/v/game/mugen/', 'https://www.bilibili.com/v/game/match/', 'https://www.bilibili.com/v/game/', 'https://www.bilibili.com/v/knowledge/science/', 'https://www.bilibili.com/v/knowledge/social_science/', 'https://www.bilibili.com/v/knowledge/humanity_history/', 'https://www.bilibili.com/v/knowledge/business/', 'https://www.bilibili.com/v/knowledge/campus/', 'https://www.bilibili.com/v/knowledge/career/', 'https://www.bilibili.com/v/knowledge/design/', 'https://www.bilibili.com/v/knowledge/skill/', 'https://www.bilibili.com/v/knowledge/', 'https://www.bilibili.com/v/tech/digital/', 'https://www.bilibili.com/v/tech/application/', 'https://www.bilibili.com/v/tech/computer_tech/', 'https://www.bilibili.com/v/tech/industry/', 'https://www.bilibili.com/v/tech/diy/', 'https://www.bilibili.com/v/tech/', 'https://www.bilibili.com/v/life/funny/', 'https://www.bilibili.com/v/life/daily/', 'https://www.bilibili.com/v/life/handmake/', 'https://www.bilibili.com/v/life/painting/', 'https://www.bilibili.com/v/life/sports/', 'https://www.bilibili.com/v/life/other/', 'https://www.bilibili.com/v/life/', 'https://www.bilibili.com/v/kichiku/guide/', 'https://www.bilibili.com/v/kichiku/mad/', 'https://www.bilibili.com/v/kichiku/manual_vocaloid/', 'https://www.bilibili.com/v/kichiku/theatre/', 'https://www.bilibili.com/v/kichiku/course/', 'https://www.bilibili.com/v/kichiku/', 'https://www.bilibili.com/v/fashion/makeup/', 'https://www.bilibili.com/v/fashion/clothing/', 'https://www.bilibili.com/v/fashion/aerobics/', 'https://www.bilibili.com/v/fashion/catwalk/', 'https://www.bilibili.com/v/fashion/trends/', 'https://www.bilibili.com/v/fashion/', 'https://www.bilibili.com/v/information/hotspot/', 'https://www.bilibili.com/v/information/global/', 'https://www.bilibili.com/v/information/social/', 'https://www.bilibili.com/v/information/multiple/', 'https://www.bilibili.com/v/information/', 'https://www.bilibili.com/v/ent/variety/', 'https://www.bilibili.com/v/ent/star/', 'https://www.bilibili.com/v/ent/', 'https://www.bilibili.com/v/cinephile/cinecism/', 'https://www.bilibili.com/v/cinephile/montage/', 'https://www.bilibili.com/v/cinephile/shortfilm/', 'https://www.bilibili.com/v/cinephile/trailer_info/', 'https://www.bilibili.com/v/cinephile/', 'https://www.bilibili.com/documentary/', 'https://www.bilibili.com/movie/', 'https://www.bilibili.com/tv/', 'https://www.bilibili.com/cinema/', 'https://www.bilibili.com/v/life/funny', 'https://www.bilibili.com/v/food', 'https://www.bilibili.com/v/animal', 'https://www.bilibili.com/v/game/stand_alone', 'https://www.bilibili.com/v/car', 'https://www.bilibili.com/v/life/daily/#/530003', 'https://www.bilibili.com/read/home', 'https://live.bilibili.com/all?visit_id=5icxsa0kmts0', 'https://live.bilibili.com/p/eden/area-tags?parentAreaId=2&areaId=0&visit_id=5icxsa0kmts0#/2/0', 'https://live.bilibili.com/p/eden/area-tags?parentAreaId=3&areaId=0&visit_id=5icxsa0kmts0#/3/0', 'https://live.bilibili.com/p/eden/area-tags?parentAreaId=6&areaId=0', 'https://live.bilibili.com/p/eden/area-tags?parentAreaId=1&areaId=0&visit_id=5icxsa0kmts0#/1/0', 'https://live.bilibili.com/p/eden/area-tags?parentAreaId=5&areaId=0&visit_id=5icxsa0kmts0#/5/0', 'https://live.bilibili.com/p/eden/area-tags?parentAreaId=9&areaId=0', 'https://live.bilibili.com/p/eden/area-tags?parentAreaId=10&areaId=0', 'https://live.bilibili.com/p/eden/area-tags?parentAreaId=11&areaId=0', 'https://live.bilibili.com', 'https://www.bilibili.com/blackboard/activity-list.html', 'https://www.bilibili.com/cheese/', 'https://www.bilibili.com/blackroom/', 'https://www.bilibili.com/v/musicplus/', 'https://www.bilibili.com/blackboard/topic_list.html', 'https://www.bilibili.com/video/BV1cX4y1P7jt?spm_id_from=333.851.b_7265636f6d6d656e64.1', 'https://www.bilibili.com/video/BV1Xh41187Ht?spm_id_from=333.851.b_7265636f6d6d656e64.2', 'https://www.bilibili.com/video/BV13X4y1P7z7?spm_id_from=333.851.b_7265636f6d6d656e64.3', 'https://www.bilibili.com/video/BV1r54y1H7U1?spm_id_from=333.851.b_7265636f6d6d656e64.4', 'https://www.bilibili.com/video/BV1pw411o7JU?spm_id_from=333.851.b_7265636f6d6d656e64.5', 'https://www.bilibili.com/video/BV1V44y1z7Zt?spm_id_from=333.851.b_7265636f6d6d656e64.6', 'https://www.bilibili.com/video/BV1eb4y1C7Uf?spm_id_from=333.851.b_7265636f6d6d656e64.7', 'https://www.bilibili.com/video/BV1Eh411Y7iq?spm_id_from=333.851.b_7265636f6d6d656e64.8', 'https://www.bilibili.com/video/BV1kX4y1A7Vc?spm_id_from=333.851.b_7265636f6d6d656e64.9', 'https://www.bilibili.com/video/BV1Zo4y1k7NA?spm_id_from=333.851.b_7265636f6d6d656e64.10', 'https://www.bilibili.com/video/undefined', 'https://www.bilibili.com/video/BV1fw411d7L4', 'https://www.bilibili.com/video/undefined', 'https://www.bilibili.com/video/BV1Eb4y1C7oJ', 'https://www.bilibili.com/video/BV1t54y1H7eh', 
'https://www.bilibili.com/video/BV1vX4y1A7HG', 'https://www.bilibili.com/video/online.html', 'https://www.bilibili.com/v/game/match/?spm_id_from=333.851.b_696e7465726e6174696f6e616c486561646572.7', 'https://www.bilibili.com/video/BV1944y1i7Yj', 'https://www.bilibili.com/video/BV1944y1i7Yj', 'https://live.bilibili.com/98', 'https://live.bilibili.com/98', 'https://www.bilibili.com/video/BV1wX4y1P7TQ', 'https://www.bilibili.com/video/BV1wX4y1P7TQ', 'https://www.bilibili.com/video/BV1QX4y1A78j', 'https://www.bilibili.com/video/BV1QX4y1A78j', 'https://www.bilibili.com/video/BV1JV411x7v6', 'https://www.bilibili.com/video/BV1JV411x7v6', 'https://www.bilibili.com/video/BV11V411s7wJ', 'https://www.bilibili.com/video/BV11V411s7wJ', 'https://www.bilibili.com/blackboard/activity-eb5t8TpXdP.html', 'https://www.bilibili.com/list/recommend/1.html', 'https://www.bilibili.com/v/customer-service', 'https://www.bilibili.com/v/game/match/', 'https://www.bilibili.com/cheese/', 'https://www.bilibili.com/festival/2021bnj']
    tester = multi_thread()
    threads_list = []

    @timerAa.timer
    def test_multi_thread():
        for i in url:
            t = threading.Thread(target=tester.nolock_task, args=(str(i),))
            threads_list.append(t)
        for t in threads_list:
            t.start()
            t.join()
    test_multi_thread()
    
    

    